## Клиент яндекс диска на python (>= 3.10)

### Особенности:

- Описание настроек в YAML файле
- Возможность настроить каждую директорию
- возможность добавлять файлы/директории в исключения по паттерну
- Files Watcher


### Установка:

```bash
git clone git@github.com:alex-pro27/yandex_disk_client.git && \
cd yandex_disk_client && \
python3 -m virtualenv vnv && \
source ./vnv/bin/activate && \
pip install -r requirements.txt && \
cp config.yaml.dist config.yaml
```


### Описание файла конфигурации 
`config.yaml` - По умолчанию путь внутри директории проекта, но можно изменить путь через переменную окружения `YA_DISK_CLIENT_CONFIG`:

- 1) Секция `disk_api` - [Документация яндекса - Доступ к API](https://yandex.ru/dev/disk/api/concepts/quickstart.html#quickstart__oauth)
    - `app_id` - ID приложения.
    - `oauth_token` - OAUTH Token.

- 2) Секция `system`
    - `tasks_pool_size` - Размер пула одновременных подключений к API Яндекс Диска (Рекомендуется не более 10 т.к. могут быть проблемы с 500 ошибками от API)
    - `read_file_chunk_size` - Размер чанка (В байтах) для чтения/отправки файла

- 3) Секция `sync` (список конфигураций для директорий, ниже описание полей конфигурации)
    - `local_dir` - Путь до директории на локальном хранилище
    - `disk_dir` - Путь до директории на Яндекс диске
    - `regexes` - (Не обязательный параметр) Список регулярных выражений для фильтрации необходимых файлов, например `[.*\.txt, .*\.py]`
    - `recursive` : true|false - Вкл./Выкл. рекурсивный обход директории
    - `ignore_directories` : true|false - Вкл./Выкл. отслеживание изменений директории

- 4) Секция `ignore_regexes` - список паттернов для исключения файлов/директорий из синхронизации с яндекс диском, например `[.*node_modules, .*\.git]`


### Примеры запуска:

Запуск синхронизации яндекс диска и локальных фалов:
```bash
python main.py --sync all
```

Или если нужно указать другой путь до файла конфигурации

```bash
YA_DISK_CLIENT_CONFIG=/my_config_path/my_config.yaml python main.py --sync all
```


Описание доступных параметров:
- `all` - синхронизация яндекс диска и локальных фалов
- `local` - синхронизация только локальных фалов
- `disk` - синхронизация только яндекс диска


Запуск отслеживания и синхронизации файлов:

```bash
python main.py --watch
```
